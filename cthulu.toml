[server]
port = 8081
sentry_dsn_env = "SENTRY_DSN"
environment = "local"

[github]
token_env = "GITHUB_TOKEN"

[slack]
bot_token_env = "SLACK_BOT_TOKEN"
app_token_env = "SLACK_APP_TOKEN"

[[tasks]]
name = "pr-review"
executor = "claude-code"
prompt = "prompts/pr_review.md"
permissions = ["Bash", "Read", "Grep", "Glob"]

[tasks.trigger.github]
event = "pull_request"
repos = [
  { slug = "bitcoin-portal/RustServer", path = "/Users/andrei/Developer/RustServer" },
  { slug = "bitcoin-portal/OrangeRockIOS", path = "/Users/andrei/Developer/orangerock/OrangeRockIOS" },
  { slug = "bitcoin-portal/RustMultiplatformCore", path = "/Users/andrei/Developer/orangerock/RustMultiplatformCore" },
  { slug = "saltyskip/cthulu", path = "/Users/andrei/Developer/orangerock/cthulu" },
]
poll_interval = 60
skip_drafts = true        # Don't review draft PRs (default: true)
review_on_push = true     # Re-review when new commits are pushed

[[tasks]]
name = "orangerock-market-brief"
executor = "claude-code"
prompt = "prompts/orangerock_brief.md"
permissions = []

[tasks.trigger.cron]
schedule = "0 */4 * * *"

[[tasks.sources]]
type = "rss"
url = "https://thedefiant.io/feed"
limit = 10

[[tasks.sources]]
type = "rss"
url = "https://blockworks.co/feed"
limit = 10

[[tasks.sources]]
type = "rss"
url = "https://www.dlnews.com/arc/outboundfeeds/rss/"
limit = 10

[[tasks.sources]]
type = "rss"
url = "https://www.theblock.co/rss.xml"
limit = 10

[[tasks.sources]]
type = "rss"
url = "https://unchainedcrypto.com/feed/"
limit = 10

#[[tasks.sinks]]
#type = "slack"
#webhook_url_env = "SLACK_WEBHOOK_URL"

[[tasks.sinks]]
type = "notion"
token_env = "NOTION_TOKEN"
database_id = "30aac5ee2bf980728eaefe59a03ea940"

[[tasks]]
name = "orangerock-newsletter"
executor = "claude-code"
prompt = "prompts/notion_newsletter.md"
permissions = []

[tasks.trigger.cron]
schedule = "0 8 * * *"

[[tasks.sources]]
type = "rss"
url = "https://thedefiant.io/feed"
limit = 10

[[tasks.sources]]
type = "rss"
url = "https://blockworks.co/feed"
limit = 10

[[tasks.sources]]
type = "rss"
url = "https://www.dlnews.com/arc/outboundfeeds/rss/"
limit = 10

[[tasks.sources]]
type = "rss"
url = "https://www.theblock.co/rss.xml"
limit = 10

[[tasks.sources]]
type = "rss"
url = "https://unchainedcrypto.com/feed/"
limit = 10

[[tasks.sinks]]
type = "notion"
token_env = "NOTION_TOKEN"
database_id = "30aac5ee2bf980728eaefe59a03ea940"

[[tasks]]
name = "dev-changelog"
executor = "claude-code"
prompt = "prompts/dev_changelog.md"
permissions = []

[tasks.trigger.cron]
schedule = "0 9 * * MON"

[[tasks.sources]]
type = "github-merged-prs"
repos = [
  "bitcoin-portal/RustServer",
  "bitcoin-portal/OrangeRockIOS",
  "bitcoin-portal/RustMultiplatformCore",
  "saltyskip/cthulu",
]
since_days = 7

[[tasks.sinks]]
type = "slack"
bot_token_env = "SLACK_BOT_TOKEN"
channel = "#the-ark"

[[tasks]]
name = "product-updates"
executor = "claude-code"
prompt = "prompts/product_updates.md"
permissions = []

[tasks.trigger.cron]
schedule = "0 10 * * MON"

[[tasks.sources]]
type = "github-merged-prs"
repos = [
  "bitcoin-portal/RustServer",
  "bitcoin-portal/OrangeRockIOS",
  "bitcoin-portal/RustMultiplatformCore",
  "saltyskip/cthulu",
]
since_days = 7

[[tasks.sinks]]
type = "slack"
bot_token_env = "SLACK_BOT_TOKEN"
channel = "#the-ark"
